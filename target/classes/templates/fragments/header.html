<!-- File: src/main/resources/templates/fragments/header.html -->
<div
  th:fragment="header"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <!-- Skip Link for Accessibility -->
  <a href="#main-content" class="skip-link visually-hidden-focusable">
    Skip to main content
  </a>

  <!-- Navigation Bar -->
  <nav
    class="navbar navbar-expand-lg navbar-light bg-light mdl-shadow--2dp"
    role="navigation"
    aria-label="Main navigation"
  >
    <div class="container-fluid">
      <a class="navbar-brand" href="/">
        <i class="fas fa-book-reader text-primary" aria-hidden="true"></i>
        <span>Bookclub</span>
      </a>

      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <!-- Static nav links -->
          <li class="nav-item">
            <a class="nav-link" href="/about">
              <i class="fas fa-info-circle" aria-hidden="true"></i> About Us
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="/contact">
              <i class="fas fa-envelope" aria-hidden="true"></i> Contact Us
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="/wishlist">
              <i class="fas fa-heart text-danger" aria-hidden="true"></i>
              Wishlist
            </a>
          </li>

          <!-- Swagger/OpenAPI link -->
          <li class="nav-item">
            <a
              class="nav-link"
              href="/swagger-ui.html"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Open API documentation in new tab"
            >
              <i class="fas fa-code" aria-hidden="true"></i> API Docs
            </a>
          </li>

          <!-- Authenticated user info -->
          <li
            class="nav-item d-flex align-items-center px-2"
            sec:authorize="isAuthenticated()"
          >
            <span
              class="navbar-text text-muted fw-bold"
              th:text="'ðŸ‘‹ ' + ${#httpServletRequest.remoteUser}"
              >User</span
            >
          </li>
          <!-- OpenAPI Documentation link -->
          <li class="nav-item">
            <a
              class="btn btn-outline-info btn-sm ms-2"
              href="/swagger-ui.html"
              target="_blank"
            >
              <i class="fas fa-book-open" aria-hidden="true"></i> API Docs
            </a>
          </li>

          <!-- Logout button for authenticated users -->
          <li class="nav-item" sec:authorize="isAuthenticated()">
            <form th:action="@{/logout}" method="post" class="d-inline">
              <button
                type="submit"
                class="btn btn-outline-danger btn-sm ms-2"
                aria-label="Log out"
              >
                <i class="fas fa-sign-out-alt"></i> Logout
              </button>
            </form>
          </li>

          <!-- Login link for unauthenticated users -->
          <li class="nav-item" sec:authorize="!isAuthenticated()">
            <a class="btn btn-outline-primary btn-sm ms-2" href="/login">
              <i class="fas fa-sign-in-alt"></i> Login
            </a>
          </li>

          <!-- Dark mode toggle -->
          <li class="nav-item">
            <button
              class="btn btn-outline-dark btn-sm ms-3 toggle-dark-mode"
              aria-label="Toggle dark mode"
              title="Toggle dark mode"
            >
              ðŸŒ“
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</div>
